<html lang="en">
<head>
  <title>Тональности гармони</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css">
  <script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>
</head>
<body>
  <div id="app">
    <div class="d-flex flex-row p-3">

      <div class="d-flex flex-column mt-0">
        <template v-for="params in melody_left">
          <div class="p-2"><button type="button" class="btn btn-secondary btn-circle">{{note(params[0], params[1])}}</button></div>
        </template>
      </div>

      <div class="d-flex flex-column mt-4">
        <template v-for="params in melody_right">
          <div class="p-2"><button type="button" class="btn btn-secondary btn-circle">{{note(params[0], params[1])}}</button></div>
        </template>
      </div>

      <ol style="visibility:hidden;"></ol>

      <div class="d-flex flex-column">
        <template v-for="params in [...Array(13).keys()]">
          <div class="p-3 bg-light border"><span>Am</span></div>
        </template>
      </div>

      <div class="d-flex flex-column p-0 m-0">
        <template v-for="params in [...Array(13).keys()]">
          <div class="p-3 bg-light border"><span>Am</span></div>
        </template>
      </div>


      <ol style="visibility:hidden;"></ol>

      <div class="d-flex flex-column">
        <template v-for="params in [...Array(13).keys()]">
          <div class="p-3 bg-light border"><span>Am</span></div>
        </template>
      </div>

      <div class="d-flex flex-column p-0 m-0">
        <template v-for="params in [...Array(13).keys()]">
          <div class="p-3 bg-light border"><span>Am</span></div>
        </template>
      </div>

      <ol style="visibility:hidden;"></ol>

      <div class="d-flex flex-column mt-4">
        <template v-for="params in [...Array(12).keys()]">
          <div class="p-3 bg-light border"><span>Am</span></div>
        </template>
      </div>

      <div class="d-flex flex-column mt-4">
        <template v-for="params in [...Array(12).keys()]">
          <div class="p-3 bg-light border"><span>Am</span></div>
        </template>
      </div>

      <ol style="visibility:hidden;"></ol>

      <div style="align-self: center;">
        <div class="btn-group-vertical" role="group">
          <template v-for="(item, index) in tonality_list" :key="item">
            <input type="radio" class="btn-check" :id="'tonality-radio-' + index" :value="index" v-model="tonality_index" >
            <label class="btn btn-outline-danger" :for="'tonality-radio-' + index">{{item}}</label>
          </template>
        </div>
      </div>

      <ol style="visibility:hidden;"></ol>

      <div class="d-flex flex-column p-0 mt-5">
        <ol class="mt-5" style="visibility:hidden;"></ol>
        <template v-for="params in [...Array(8).keys()]">
          <div class="p-3 bg-light border"><span>Am</span></div>
        </template>
      </div>

      <div class="d-flex flex-column p-0 mt-5">
        <ol class="mt-5" style="visibility:hidden;"></ol>
        <template v-for="params in [...Array(8).keys()]">
          <div class="p-3 bg-light border"><span>Am</span></div>
        </template>
      </div>

      <div class="d-flex flex-column p-0 mt-5">
        <ol class="mt-5" style="visibility:hidden;"></ol>
        <template v-for="params in [...Array(8).keys()]">
          <div class="p-3 bg-light border"><span>Am</span></div>
        </template>
      </div>

      <ol style="visibility:hidden;"></ol>

      <div class="d-flex flex-column p-0 mt-5">
        <template v-for="params in [...Array(10).keys()]">
          <div class="p-3 bg-light border"><span>Am</span></div>
        </template>
      </div>

      <div class="d-flex flex-column p-0 mt-5">
        <template v-for="params in [...Array(10).keys()]">
          <div class="p-3 bg-light border"><span>Am</span></div>
        </template>
      </div>

      <ol style="visibility:hidden;"></ol>

      <div class="d-flex flex-column mt-5">
        <ol class="mt-3" style="visibility:hidden;"></ol>
        <template v-for="params in bass_left">
          <div class="p-2"><button type="button" class="btn btn-secondary btn-circle">{{note(params[0], params[1])}}</button></div>
        </template>
      </div>

      <div class="d-flex flex-column mt-5">
        <ol class="mt-5" style="visibility:hidden;"></ol>
        <template v-for="(params, index) in bass_middle">
          <div class="p-2"><button type="button" class="btn btn-circle" :class="index % 2 != 0 ? 'btn-secondary' : 'btn-success'">{{note(params[0], params[1])}}</button></div>
        </template>
      </div>

      <div class="d-flex flex-column mt-5">
        <ol class="mt-4" style="visibility:hidden;"></ol>
        <template v-for="(params, index) in bass_right">
          <div class="p-2"><button type="button" class="btn btn-circle" :class="index % 2 != 0 ? 'btn-secondary' : 'btn-success'">{{note(params[0], params[1])}}</button></div>
        </template>
      </div>

    </div>
  </div>
</body>

<style type="text/css">
  .btn-circle {
    width: 38px;
    height: 38px;
    text-align: center;
    padding: 0; // changed
    font-size: 12px;
    line-height: 1.428571429;
    border-radius: 18px;
    margin: 2px;
  }
</style>

<script>
  const { createApp, ref, computed } = Vue
  
  const notes_list = ['C','C#','D','Eb','E','F','F#','G','G#','A','Bb','B']
  const tonality_list = ['До','До#','Ре','Ре#','Ми','Фа','Фа#','Соль','Соль#','Ля','Ля#','Си']
  const melody_left = [
    [3, 4],
    [8, 3],
    [0, 3],
    [4, 3],
    [7, 3],
    [11, 3],
    [2, 4],
    [5, 4],
    [9, 4],
    [0, 5],
    [4, 5],
    [7, 5],
    [11, 5]
  ]
  const melody_right = [
    [6, 4],
    [2, 3],
    [5, 3],
    [9, 3],
    [0, 4],
    [4, 4],
    [7, 4],
    [11, 4],
    [2, 5],
    [5, 5],
    [9, 5],
    [0, 6]
  ]
  const bass_left = [
    [6, 2],
    [9, 2],
    [11, 2],
    [0, 2],
    [2, 2],
    [4, 2],
    [5, 2],
    [7, 2],
    [9, 2],
  ]
  const bass_middle = [
    [11, 7],
    [11, 2],
    [4, 7],
    [4, 2],
    [9, "m"],
    [9, 2],
    [2, "m"],
    [2, 2],
  ]
  const bass_right = [
    [2, "7"],
    [2, 2],
    [7, ""],
    [7, 2],
    [0, ""],
    [0, 2],
    [5, ""],
    [5, 2]
  ]
 // const notes_list = ['0','1', '2', '3','4','5','6', '7','8', '9','10','11']
 // const notes_list = ['C','C#','D','Eb','E','F','F#','G','G#','A','Bb','B']
  const tonality_index = ref(0)
  const tonality_current = computed(() => {
    return tonality_list[tonality_index.value]
  })
  const notes_current = computed(() => {
    const temp = [...notes_list, ...notes_list]
    return temp.slice(tonality_index.value, tonality_index.value+12)
  })

  const note = (index, octave) => `${notes_current.value[index]}${octave}`

  createApp({
    setup() {

      return {
        tonality_list,
        tonality_index,
        notes_current,
        melody_left,
        melody_right,
        bass_left,
        bass_middle,
        bass_right,
        note,
      }
    }
  }).mount('#app')
</script>
</html>